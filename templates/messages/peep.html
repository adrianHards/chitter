{% extends "layout.html" %}
{% block body %}

<form onsubmit="event.preventDefault();">
  <div class="flex flex-col items-center w-full">
    <div class="relative w-3/4 md:w-2/3 lg:w-2/5">
      <textarea id="message" name="content" rows="3"
        class="w-full text-sm p-2.5 text-gray-900 bg-gray-50 rounded-lg focus:outline-none"
        placeholder="Write a peep..." oninput="toggleButtonVisibility()" onkeypress="checkEnterKey(event)"></textarea>
      <button onclick="sendMessage()" id="submitButton" style="display: none;"
        class="absolute bottom-4 right-4 bg-blue-500/10 text-sm font-medium text-blue-500 py-2 px-4 rounded-lg hover:bg-blue-500 hover:text-white">
        Peep
      </button>
    </div>
  </div>
</form>

<script>
  const toggleButtonVisibility = () => {
    const messageInput = document.getElementById('message');
    const submitButton = document.getElementById('submitButton');
    if (messageInput.value.length > 0) {
      submitButton.style.display = 'block';
    } else {
      submitButton.style.display = 'none';
    }
  };

  const checkEnterKey = (event) => {
    if (event.keyCode === 13) {
      event.preventDefault();
      sendMessage()
      toggleButtonVisibility()
    }
  };
</script>

{% endblock %}